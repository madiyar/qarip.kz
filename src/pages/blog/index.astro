---
import dayjs from 'dayjs';
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
---
<Layout title="Мақалалар — Qarip">
  <section class="max-w-7xl mx-auto dark:text-white">
    <h1 class="page-title mb-8">Мақалалар</h1>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      {posts.map(post => (
        <a
          href={`/blog/${post.slug}/`}
          class="hover:text-brand border-2 rounded-xl p-6"
        >
          <h2 class="text-xl">{post.data.title}</h2>
          
          {post.data.pubDate && (
            <p>{dayjs(post.data.pubDate).format('DD.MM.YYYY')}</p>
          )}
        </a>
      ))}
    </div>
  </section>
</Layout>
